# C03 Driver Development

**æ‰€å±å­é¢†åŸŸ**: [B02_Unix_Kernel](../README.md)  
**åˆ›å»ºæ—¥æœŸ**: 2026-01-30  
**æœ€åæ›´æ–°**: 2026-01-30

## ğŸ“‹ ä¸»é¢˜å®šä½

è®¾å¤‡é©±åŠ¨ç¨‹åºæ˜¯æ“ä½œç³»ç»Ÿå†…æ ¸ä¸ç¡¬ä»¶è®¾å¤‡ä¹‹é—´çš„æ¡¥æ¢ï¼Œå®ƒè´Ÿè´£å°†é€šç”¨çš„ç³»ç»Ÿè°ƒç”¨è½¬æ¢ä¸ºç‰¹å®šç¡¬ä»¶çš„æ“ä½œæŒ‡ä»¤ï¼ŒåŒæ—¶ç®¡ç†ç¡¬ä»¶èµ„æºã€å¤„ç†ä¸­æ–­ã€æä¾›å¹¶å‘æ§åˆ¶ã€‚é©±åŠ¨å¼€å‘æ˜¯å†…æ ¸å¼€å‘ä¸­æœ€å…·æŒ‘æˆ˜æ€§ä¹Ÿæœ€èƒ½ä½“ç°ç¡¬ä»¶äº¤äº’ç»†èŠ‚çš„é¢†åŸŸã€‚

Linuxé©±åŠ¨å­ç³»ç»Ÿç»å†äº†ä»å•ä¸€çš„æ•´ä½“å¼é©±åŠ¨æ¨¡å‹åˆ°ç°ä»£çš„æ€»çº¿-è®¾å¤‡-é©±åŠ¨åˆ†ç¦»æ¶æ„çš„æ¼”è¿›ã€‚å½“å‰Linuxå†…æ ¸æ”¯æŒå¤šç§é©±åŠ¨æ¨¡å‹ï¼šå­—ç¬¦è®¾å¤‡ã€å—è®¾å¤‡ã€ç½‘ç»œè®¾å¤‡ã€PCIeè®¾å¤‡ã€USBè®¾å¤‡ã€å¹³å°è®¾å¤‡ç­‰ï¼Œæ¯ç§éƒ½æœ‰å…¶ç‰¹å®šçš„ç¼–ç¨‹æ¥å£å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚

æœ¬ä¸“é¢˜ç³»ç»Ÿä»‹ç»Linuxè®¾å¤‡é©±åŠ¨å¼€å‘çš„åŸºç¡€çŸ¥è¯†ã€æ ¸å¿ƒæœºåˆ¶ã€è°ƒè¯•æŠ€å·§ä»¥åŠç°ä»£é©±åŠ¨æ¡†æ¶ï¼ˆå¦‚DPDKã€VFIOï¼‰çš„åº”ç”¨ï¼Œå¸®åŠ©å¼€å‘è€…æŒæ¡ä»ç®€å•å­—ç¬¦è®¾å¤‡åˆ°é«˜æ€§èƒ½é©±åŠ¨çš„å¼€å‘æŠ€èƒ½ã€‚

## ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ

### è®¾å¤‡ç±»å‹

| è®¾å¤‡ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ | ä¸»è¦æ¥å£ |
|---------|------|------|---------|
| **å­—ç¬¦è®¾å¤‡** | å­—èŠ‚æµè®¿é—® | ä¸²å£ã€GPIO | file_operations |
| **å—è®¾å¤‡** | éšæœºè®¿é—®ï¼Œæœ‰ç¼“å­˜ | ç¡¬ç›˜ã€SSD | block_device_operations |
| **ç½‘ç»œè®¾å¤‡** | åŒ…ä¼ è¾“ | ç½‘å¡ | net_device_ops |
| **PCIeè®¾å¤‡** | é«˜é€Ÿæ‰©å±•è®¾å¤‡ | GPUã€NVMe | pci_driver |
| **USBè®¾å¤‡** | çƒ­æ’æ‹”è®¾å¤‡ | Uç›˜ã€æ‘„åƒå¤´ | usb_driver |
| **å¹³å°è®¾å¤‡** | SoCå†…ç½®è®¾å¤‡ | I2Cã€SPIã€Timer | platform_driver |

### Linuxè®¾å¤‡æ¨¡å‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Linuxè®¾å¤‡æ¨¡å‹æ¶æ„                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      æ€»çº¿ (Bus)                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚   â”‚
â”‚  â”‚  â”‚  platformâ”‚  â”‚   pci   â”‚  â”‚   usb   â”‚  â”‚   i2c   â”‚  ...      â”‚   â”‚
â”‚  â”‚  â”‚  æ€»çº¿   â”‚  â”‚  æ€»çº¿   â”‚  â”‚  æ€»çº¿   â”‚  â”‚  æ€»çº¿   â”‚           â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜            â”‚   â”‚
â”‚  â”‚       â”‚            â”‚            â”‚            â”‚                  â”‚   â”‚
â”‚  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚   â”‚
â”‚  â”‚                    match() - åŒ¹é…è®¾å¤‡å’Œé©±åŠ¨                      â”‚   â”‚
â”‚  â”‚                    probe() - åˆå§‹åŒ–è®¾å¤‡                          â”‚   â”‚
â”‚  â”‚                    remove() - ç§»é™¤è®¾å¤‡                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                          â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚           â–¼                  â–¼                  â–¼                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚    è®¾å¤‡       â”‚  â”‚    é©±åŠ¨       â”‚  â”‚   ç±» (Class)   â”‚              â”‚
â”‚  â”‚  (Device)     â”‚  â”‚  (Driver)     â”‚  â”‚                â”‚              â”‚
â”‚  â”‚               â”‚  â”‚               â”‚  â”‚ æŠ½è±¡è®¾å¤‡ç±»å‹    â”‚              â”‚
â”‚  â”‚ ç¡¬ä»¶çš„æŠ½è±¡    â”‚  â”‚ é©±åŠ¨çš„æŠ½è±¡    â”‚  â”‚                â”‚              â”‚
â”‚  â”‚               â”‚  â”‚               â”‚  â”‚ â€¢ input        â”‚              â”‚
â”‚  â”‚ â€¢ è®¾å¤‡æ ‘èŠ‚ç‚¹  â”‚  â”‚ â€¢ probe/removeâ”‚  â”‚ â€¢ net          â”‚              â”‚
â”‚  â”‚ â€¢ èµ„æºæè¿°    â”‚  â”‚ â€¢ æ“ä½œæ¥å£    â”‚  â”‚ â€¢ block        â”‚              â”‚
â”‚  â”‚ â€¢ å±æ€§        â”‚  â”‚ â€¢ é…ç½®å‚æ•°    â”‚  â”‚ â€¢ tty          â”‚              â”‚
â”‚  â”‚               â”‚  â”‚               â”‚  â”‚ â€¢ usb          â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                         â”‚
â”‚  sysfsæ–‡ä»¶ç³»ç»Ÿæ˜ å°„:                                                      â”‚
â”‚  /sys/bus/      - æ‰€æœ‰æ³¨å†Œçš„æ€»çº¿                                         â”‚
â”‚  /sys/devices/  - è®¾å¤‡æ ‘                                                 â”‚
â”‚  /sys/class/    - æŒ‰ç±»åˆ«ç»„ç»‡çš„è®¾å¤‡                                       â”‚
â”‚  /sys/module/   - å·²åŠ è½½çš„æ¨¡å—                                           â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å­—ç¬¦è®¾å¤‡é©±åŠ¨æ¡†æ¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       å­—ç¬¦è®¾å¤‡é©±åŠ¨æ¶æ„                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  ç”¨æˆ·ç©ºé—´                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  open()  read()  write()  ioctl()  mmap()  close()              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â†“ ç³»ç»Ÿè°ƒç”¨                                 â”‚
â”‚  å†…æ ¸ç©ºé—´                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                     è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ (VFS)                            â”‚   â”‚
â”‚  â”‚                      chrdev_open()                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â†“                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    å­—ç¬¦è®¾å¤‡æ ¸å¿ƒå±‚                                 â”‚   â”‚
â”‚  â”‚                                                                 â”‚   â”‚
â”‚  â”‚  è®¾å¤‡å· (dev_t) = ä¸»è®¾å¤‡å· (12bit) + æ¬¡è®¾å¤‡å· (20bit)            â”‚   â”‚
â”‚  â”‚                                                                 â”‚   â”‚
â”‚  â”‚  cdevç»“æ„:                                                      â”‚   â”‚
â”‚  â”‚  struct cdev {                                                  â”‚   â”‚
â”‚  â”‚      struct kobject kobj;                                       â”‚   â”‚
â”‚  â”‚      struct module *owner;                                      â”‚   â”‚
â”‚  â”‚      const struct file_operations *ops;                         â”‚   â”‚
â”‚  â”‚      struct list_head list;                                     â”‚   â”‚
â”‚  â”‚      dev_t dev;                                                 â”‚   â”‚
â”‚  â”‚      unsigned int count;                                        â”‚   â”‚
â”‚  â”‚  };                                                             â”‚   â”‚
â”‚  â”‚                                                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â†“                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    è®¾å¤‡é©±åŠ¨å®ç°                                   â”‚   â”‚
â”‚  â”‚                                                                 â”‚   â”‚
â”‚  â”‚  struct file_operations my_fops = {                             â”‚   â”‚
â”‚  â”‚      .owner = THIS_MODULE,                                      â”‚   â”‚
â”‚  â”‚      .open = my_open,                                           â”‚   â”‚
â”‚  â”‚      .read = my_read,                                           â”‚   â”‚
â”‚  â”‚      .write = my_write,                                         â”‚   â”‚
â”‚  â”‚      .ioctl = my_ioctl,                                         â”‚   â”‚
â”‚  â”‚      .mmap = my_mmap,                                           â”‚   â”‚
â”‚  â”‚      .release = my_release,                                     â”‚   â”‚
â”‚  â”‚  };                                                             â”‚   â”‚
â”‚  â”‚                                                                 â”‚   â”‚
â”‚  â”‚  static int __init my_init(void) {                              â”‚   â”‚
â”‚  â”‚      alloc_chrdev_region(&dev, 0, 1, "mydev");                   â”‚   â”‚
â”‚  â”‚      cdev_init(&my_cdev, &my_fops);                             â”‚   â”‚
â”‚  â”‚      cdev_add(&my_cdev, dev, 1);                                â”‚   â”‚
â”‚  â”‚  }                                                              â”‚   â”‚
â”‚  â”‚                                                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â†“                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    ç¡¬ä»¶æ“ä½œå±‚                                     â”‚   â”‚
â”‚  â”‚                                                                 â”‚   â”‚
â”‚  â”‚  â€¢ MMIOå¯„å­˜å™¨è®¿é—® (ioremap/readl/writel)                        â”‚   â”‚
â”‚  â”‚  â€¢ DMAæ“ä½œ                                                      â”‚   â”‚
â”‚  â”‚  â€¢ ä¸­æ–­å¤„ç† (request_irq/free_irq)                              â”‚   â”‚
â”‚  â”‚  â€¢ æ—¶é’Ÿ/å®šæ—¶å™¨                                                  â”‚   â”‚
â”‚  â”‚                                                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¸­æ–­å¤„ç†æœºåˆ¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Linuxä¸­æ–­å¤„ç†æœºåˆ¶                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  ç¡¬ä»¶ä¸­æ–­                                                                â”‚
â”‚      â”‚                                                                  â”‚
â”‚      â–¼                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    ä¸ŠåŠéƒ¨ (Top Half) - ç¡¬ä¸­æ–­                     â”‚   â”‚
â”‚  â”‚                                                                 â”‚   â”‚
â”‚  â”‚  ç‰¹ç‚¹:                                                          â”‚   â”‚
â”‚  â”‚  â€¢ å¿«é€Ÿæ‰§è¡Œï¼Œå…³ä¸­æ–­è¿è¡Œ                                          â”‚   â”‚
â”‚  â”‚  â€¢ ä¿å­˜çŠ¶æ€ï¼Œè°ƒåº¦ä¸‹åŠéƒ¨                                          â”‚   â”‚
â”‚  â”‚  â€¢ æœ€å°åŒ–å…³é”®ä»£ç                                                 â”‚   â”‚
â”‚  â”‚                                                                 â”‚   â”‚
â”‚  â”‚  static irqreturn_t my_irq_handler(int irq, void *dev_id) {     â”‚   â”‚
â”‚  â”‚      // 1. ç¡®è®¤ä¸­æ–­æº                                            â”‚   â”‚
â”‚  â”‚      // 2. è¯»å–å…³é”®æ•°æ®                                          â”‚   â”‚
â”‚  â”‚      // 3. è°ƒåº¦ä¸‹åŠéƒ¨                                            â”‚   â”‚
â”‚  â”‚      schedule_work(&my_work);  // æˆ– tasklet_schedule()          â”‚   â”‚
â”‚  â”‚      return IRQ_HANDLED;                                        â”‚   â”‚
â”‚  â”‚  }                                                              â”‚   â”‚
â”‚  â”‚                                                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â†“                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    ä¸‹åŠéƒ¨ (Bottom Half)                           â”‚   â”‚
â”‚  â”‚                                                                 â”‚   â”‚
â”‚  â”‚  æœºåˆ¶é€‰æ‹©:                                                       â”‚   â”‚
â”‚  â”‚                                                                 â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚   softirq   â”‚  â”‚   tasklet   â”‚  â”‚       workqueue         â”‚ â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ æœ€é«˜æ€§èƒ½   â”‚  â”‚ â€¢ softirq   â”‚  â”‚ â€¢ è¿›ç¨‹ä¸Šä¸‹æ–‡            â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ é™æ€åˆ†é…   â”‚  â”‚   çš„å°è£…    â”‚  â”‚ â€¢ å¯ä»¥ç¡çœ               â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ ä¸èƒ½ç¡çœ    â”‚  â”‚ â€¢ åŒä¸€taskletâ”‚ â”‚ â€¢ å»¶è¿Ÿè¾ƒå¤§              â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ åŒç±»å‹ä¸²è¡Œ â”‚  â”‚   ä¸ä¼šå¹¶è¡Œ  â”‚  â”‚ â€¢ æ¨èç”¨äºI/Oæ“ä½œ        â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ ç½‘ç»œ/å—å±‚  â”‚  â”‚ â€¢ ä¸å¯ç¡çœ   â”‚  â”‚                         â”‚ â”‚   â”‚
â”‚  â”‚  â”‚   ä½¿ç”¨      â”‚  â”‚ â€¢ ç®€å•è®¾å¤‡  â”‚  â”‚                         â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚                                                                 â”‚   â”‚
â”‚  â”‚  void my_work_handler(struct work_struct *work) {               â”‚   â”‚
â”‚  â”‚      // å¯ä»¥ç¡çœ çš„æ“ä½œ                                           â”‚   â”‚
â”‚  â”‚      // æ•°æ®å¤„ç†                                                 â”‚   â”‚
â”‚  â”‚      // ç”¨æˆ·æ€é€šçŸ¥                                               â”‚   â”‚
â”‚  â”‚  }                                                              â”‚   â”‚
â”‚  â”‚                                                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”‚  ç°ä»£æ›¿ä»£æ–¹æ¡ˆ: threaded IRQ                                             â”‚
â”‚  request_threaded_irq(irq, handler, thread_fn, ...)                     â”‚
â”‚  - handlerä¸ºNULLæ—¶ï¼Œæ‰€æœ‰å¤„ç†éƒ½åœ¨çº¿ç¨‹ä¸­                                  â”‚
â”‚  - è‡ªåŠ¨å°†ä¸­æ–­å¤„ç†çº¿ç¨‹åŒ–ï¼Œç®€åŒ–ç¼–ç¨‹                                        â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ› ï¸ æŠ€æœ¯å®è·µ

### ç®€å•å­—ç¬¦è®¾å¤‡é©±åŠ¨

**1. Hello Worldå­—ç¬¦è®¾å¤‡é©±åŠ¨**

```c
/*
 * hello_cdev.c - ç®€å•å­—ç¬¦è®¾å¤‡é©±åŠ¨ç¤ºä¾‹
 * æ¼”ç¤ºåŸºæœ¬çš„å­—ç¬¦è®¾å¤‡æ³¨å†Œã€file_operationså®ç°
 */

#include <linux/module.h>
#include <linux/fs.h>
#include <linux/cdev.h>
#include <linux/uaccess.h>
#include <linux/device.h>

#define DEVICE_NAME "hello_cdev"
#define CLASS_NAME "hello"
#define BUFFER_SIZE 1024

static int major;
static struct class *hello_class = NULL;
static struct cdev hello_cdev;
static dev_t dev_num;

/* è®¾å¤‡ç¼“å†²åŒº */
static char device_buffer[BUFFER_SIZE];
static size_t buffer_pos = 0;

/* æ‰“å¼€è®¾å¤‡ */
static int hello_open(struct inode *inode, struct file *file)
{
    pr_info("hello_cdev: è®¾å¤‡è¢«æ‰“å¼€\n");
    return 0;
}

/* é‡Šæ”¾è®¾å¤‡ */
static int hello_release(struct inode *inode, struct file *file)
{
    pr_info("hello_cdev: è®¾å¤‡è¢«é‡Šæ”¾\n");
    return 0;
}

/* è¯»å–è®¾å¤‡ */
static ssize_t hello_read(struct file *file, char __user *user_buffer,
                         size_t count, loff_t *offset)
{
    size_t available = buffer_pos - *offset;
    size_t to_read = min(count, available);
    
    if (to_read == 0)
        return 0;
    
    if (copy_to_user(user_buffer, device_buffer + *offset, to_read))
        return -EFAULT;
    
    *offset += to_read;
    pr_info("hello_cdev: è¯»å– %zu å­—èŠ‚\n", to_read);
    
    return to_read;
}

/* å†™å…¥è®¾å¤‡ */
static ssize_t hello_write(struct file *file, const char __user *user_buffer,
                          size_t count, loff_t *offset)
{
    size_t available = BUFFER_SIZE - buffer_pos;
    size_t to_write = min(count, available);
    
    if (to_write == 0)
        return -ENOSPC;
    
    if (copy_from_user(device_buffer + buffer_pos, user_buffer, to_write))
        return -EFAULT;
    
    buffer_pos += to_write;
    *offset = buffer_pos;
    
    pr_info("hello_cdev: å†™å…¥ %zu å­—èŠ‚\n", to_write);
    
    return to_write;
}

/* ioctl æ§åˆ¶ */
static long hello_ioctl(struct file *file, unsigned int cmd, unsigned long arg)
{
    switch (cmd) {
    case 0x01:  /* æ¸…ç©ºç¼“å†²åŒº */
        buffer_pos = 0;
        memset(device_buffer, 0, BUFFER_SIZE);
        pr_info("hello_cdev: ç¼“å†²åŒºå·²æ¸…ç©º\n");
        break;
        
    case 0x02:  /* è·å–ç¼“å†²åŒºå¤§å° */
        return put_user(buffer_pos, (size_t __user *)arg);
        
    default:
        return -EINVAL;
    }
    
    return 0;
}

/* æ–‡ä»¶æ“ä½œè¡¨ */
static struct file_operations hello_fops = {
    .owner = THIS_MODULE,
    .open = hello_open,
    .release = hello_release,
    .read = hello_read,
    .write = hello_write,
    .unlocked_ioctl = hello_ioctl,
    .llseek = default_llseek,
};

/* æ¨¡å—åˆå§‹åŒ– */
static int __init hello_init(void)
{
    int ret;
    
    pr_info("hello_cdev: æ¨¡å—åŠ è½½\n");
    
    /* 1. åˆ†é…è®¾å¤‡å· */
    ret = alloc_chrdev_region(&dev_num, 0, 1, DEVICE_NAME);
    if (ret < 0) {
        pr_err("hello_cdev: åˆ†é…è®¾å¤‡å·å¤±è´¥\n");
        return ret;
    }
    major = MAJOR(dev_num);
    pr_info("hello_cdev: ä¸»è®¾å¤‡å· %d\n", major);
    
    /* 2. åˆ›å»ºè®¾å¤‡ç±» */
    hello_class = class_create(THIS_MODULE, CLASS_NAME);
    if (IS_ERR(hello_class)) {
        pr_err("hello_cdev: åˆ›å»ºç±»å¤±è´¥\n");
        unregister_chrdev_region(dev_num, 1);
        return PTR_ERR(hello_class);
    }
    
    /* 3. åˆå§‹åŒ–å¹¶æ·»åŠ å­—ç¬¦è®¾å¤‡ */
    cdev_init(&hello_cdev, &hello_fops);
    hello_cdev.owner = THIS_MODULE;
    
    ret = cdev_add(&hello_cdev, dev_num, 1);
    if (ret) {
        pr_err("hello_cdev: æ·»åŠ å­—ç¬¦è®¾å¤‡å¤±è´¥\n");
        class_destroy(hello_class);
        unregister_chrdev_region(dev_num, 1);
        return ret;
    }
    
    /* 4. åˆ›å»ºè®¾å¤‡èŠ‚ç‚¹ */
    device_create(hello_class, NULL, dev_num, NULL, DEVICE_NAME);
    
    pr_info("hello_cdev: è®¾å¤‡ /dev/%s åˆ›å»ºæˆåŠŸ\n", DEVICE_NAME);
    return 0;
}

/* æ¨¡å—å¸è½½ */
static void __exit hello_exit(void)
{
    pr_info("hello_cdev: æ¨¡å—å¸è½½\n");
    
    device_destroy(hello_class, dev_num);
    cdev_del(&hello_cdev);
    class_destroy(hello_class);
    unregister_chrdev_region(dev_num, 1);
    
    pr_info("hello_cdev: è®¾å¤‡å·²ç§»é™¤\n");
}

module_init(hello_init);
module_exit(hello_exit);

MODULE_LICENSE("GPL");
MODULE_AUTHOR("Your Name");
MODULE_DESCRIPTION("Hello Worldå­—ç¬¦è®¾å¤‡é©±åŠ¨");
MODULE_VERSION("1.0");
```

**Makefile:**

```makefile
# Makefile for hello_cdev driver

obj-m += hello_cdev.o

KDIR ?= /lib/modules/$(shell uname -r)/build
PWD := $(shell pwd)

all:
	$(MAKE) -C $(KDIR) M=$(PWD) modules

clean:
	$(MAKE) -C $(KDIR) M=$(PWD) clean

install:
	$(MAKE) -C $(KDIR) M=$(PWD) modules_install
	depmod -a

load:
	insmod hello_cdev.ko
	mknod /dev/hello_cdev c $$(grep hello_cdev /proc/devices | awk '{print $$1}') 0 2>/dev/null || true

unload:
	rmmod hello_cdev
	rm -f /dev/hello_cdev
```

**æµ‹è¯•ç¨‹åº:**

```c
/*
 * test_hello_cdev.c - æµ‹è¯•ç¨‹åº
 */

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <fcntl.h>
#include <unistd.h>
#include <sys/ioctl.h>

#define DEVICE_PATH "/dev/hello_cdev"

int main() {
    int fd;
    char write_buf[] = "Hello from userspace!";
    char read_buf[256];
    ssize_t ret;
    
    /* æ‰“å¼€è®¾å¤‡ */
    fd = open(DEVICE_PATH, O_RDWR);
    if (fd < 0) {
        perror("æ‰“å¼€è®¾å¤‡å¤±è´¥");
        return 1;
    }
    
    printf("è®¾å¤‡æ‰“å¼€æˆåŠŸ\n");
    
    /* å†™å…¥æ•°æ® */
    ret = write(fd, write_buf, strlen(write_buf));
    if (ret < 0) {
        perror("å†™å…¥å¤±è´¥");
        close(fd);
        return 1;
    }
    printf("å†™å…¥ %zd å­—èŠ‚: %s\n", ret, write_buf);
    
    /* é‡ç½®æ–‡ä»¶ä½ç½® */
    lseek(fd, 0, SEEK_SET);
    
    /* è¯»å–æ•°æ® */
    ret = read(fd, read_buf, sizeof(read_buf) - 1);
    if (ret < 0) {
        perror("è¯»å–å¤±è´¥");
        close(fd);
        return 1;
    }
    read_buf[ret] = '\0';
    printf("è¯»å– %zd å­—èŠ‚: %s\n", ret, read_buf);
    
    /* ioctlæµ‹è¯• */
    size_t buf_size;
    ret = ioctl(fd, 0x02, &buf_size);
    if (ret == 0) {
        printf("ç¼“å†²åŒºå¤§å°: %zu\n", buf_size);
    }
    
    /* æ¸…ç©ºç¼“å†²åŒº */
    ret = ioctl(fd, 0x01, NULL);
    if (ret == 0) {
        printf("ç¼“å†²åŒºå·²æ¸…ç©º\n");
    }
    
    close(fd);
    return 0;
}
```

### é©±åŠ¨è°ƒè¯•å·¥å…·

**2. é©±åŠ¨è°ƒè¯•è„šæœ¬**

```bash
#!/bin/bash
# Linuxé©±åŠ¨è°ƒè¯•å·¥å…·é›†åˆ

set -e

ACTION=${1:-help}

help() {
    echo "é©±åŠ¨è°ƒè¯•å·¥å…·"
    echo "ç”¨æ³•: $0 <action>"
    echo ""
    echo "Actions:"
    echo "  dmesg      - æŸ¥çœ‹å†…æ ¸æ—¥å¿—"
    echo "  devices    - åˆ—å‡ºå­—ç¬¦è®¾å¤‡"
    echo "  modules    - åˆ—å‡ºå·²åŠ è½½æ¨¡å—"
    echo "  debug      - å¯ç”¨åŠ¨æ€è°ƒè¯•"
    echo "  trace      - å¯ç”¨ftrace"
    echo "  probe      - æŸ¥çœ‹è®¾å¤‡probeçŠ¶æ€"
}

cmd_dmesg() {
    echo "=== å†…æ ¸æ—¥å¿— (æœ€è¿‘50æ¡) ==="
    dmesg -T | tail -50
    
    echo ""
    echo "=== é©±åŠ¨ç›¸å…³æ—¥å¿— ==="
    dmesg -T | grep -E "(driver|module|probe|register)" | tail -20
}

cmd_devices() {
    echo "=== å­—ç¬¦è®¾å¤‡ ==="
    cat /proc/devices | grep -E "Character|^[0-9]+"
    
    echo ""
    echo "=== å—è®¾å¤‡ ==="
    cat /proc/devices | grep -E "Block|^[0-9]+"
}

cmd_modules() {
    echo "=== å·²åŠ è½½æ¨¡å— (æŒ‰å¤§å°æ’åº) ==="
    lsmod | head -1
    lsmod | tail -n +2 | sort -k2 -n -r | head -20
}

cmd_debug() {
    echo "=== å¯ç”¨åŠ¨æ€è°ƒè¯• ==="
    
    # æ£€æŸ¥debugfsæ˜¯å¦æŒ‚è½½
    if ! mount | grep -q debugfs; then
        mount -t debugfs none /sys/kernel/debug
    fi
    
    # åˆ—å‡ºå¯ç”¨çš„åŠ¨æ€è°ƒè¯•ç‚¹
    echo "å¯ç”¨çš„åŠ¨æ€è°ƒè¯•ç‚¹:"
    cat /sys/kernel/debug/dynamic_debug/control | head -20
    
    echo ""
    echo "å¯ç”¨æ‰€æœ‰é©±åŠ¨çš„è°ƒè¯•ä¿¡æ¯:"
    echo 'echo "module your_module +p" > /sys/kernel/debug/dynamic_debug/control'
}

cmd_trace() {
    echo "=== ftraceè·Ÿè¸ªè®¾ç½® ==="
    
    TRACING_DIR="/sys/kernel/debug/tracing"
    
    if [ ! -d "$TRACING_DIR" ]; then
        echo "ftraceä¸å¯ç”¨ï¼Œè¯·æ£€æŸ¥å†…æ ¸é…ç½®"
        return 1
    fi
    
    # å¯ç”¨function tracer
    echo function > $TRACING_DIR/current_tracer 2>/dev/null || true
    
    # è®¾ç½®è¦è·Ÿè¸ªçš„å‡½æ•°ï¼ˆä¾‹å¦‚é©±åŠ¨ç›¸å…³ï¼‰
    echo "__platform_driver_register" > $TRACING_DIR/set_ftrace_filter 2>/dev/null || true
    echo "driver_probe_device" >> $TRACING_DIR/set_ftrace_filter 2>/dev/null || true
    
    echo "è·Ÿè¸ªå·²å¯ç”¨ï¼ŒæŸ¥çœ‹ç»“æœ:"
    echo "cat $TRACING_DIR/trace"
}

cmd_probe() {
    echo "=== è®¾å¤‡ProbeçŠ¶æ€ ==="
    
    if [ -d /sys/kernel/debug/devices_deferred ]; then
        echo "å»¶è¿Ÿprobeçš„è®¾å¤‡:"
        cat /sys/kernel/debug/devices_deferred 2>/dev/null || echo "æ— "
    fi
    
    echo ""
    echo "é©±åŠ¨ç»‘å®šçŠ¶æ€:"
    ls /sys/bus/platform/drivers/ 2>/dev/null | head -10
}

# æ‰§è¡Œå‘½ä»¤
case "$ACTION" in
    dmesg) cmd_dmesg ;;
    devices) cmd_devices ;;
    modules) cmd_modules ;;
    debug) cmd_debug ;;
    trace) cmd_trace ;;
    probe) cmd_probe ;;
    *) help ;;
esac
```

## ğŸ“š èµ„æºç´¢å¼•

### å†…æ ¸æ–‡æ¡£

| æ–‡æ¡£ | è·¯å¾„ | è¯´æ˜ |
|-----|------|------|
| **Driver API** | Documentation/driver-api/ | é©±åŠ¨å¼€å‘APIæ–‡æ¡£ |
| **PCI** | Documentation/PCI/ | PCIé©±åŠ¨å¼€å‘ |
| **DMA** | Documentation/core-api/dma-api.rst | DMA APIæŒ‡å— |
| **Device Model** | Documentation/driver-api/driver-model/ | è®¾å¤‡æ¨¡å‹ |

### å·¥å…·ä¸èµ„æº

| èµ„æº | è¯´æ˜ | é“¾æ¥ |
|-----|------|------|
| **LDD3** | Linuxè®¾å¤‡é©±åŠ¨ç¨‹åºï¼ˆç¬¬3ç‰ˆï¼‰| ç»å…¸æ•™æ |
| **ELDD** | Essential Linux Device Drivers | æ·±å…¥è®²è§£ |
| **kernelnewbies** | å†…æ ¸æ–°æ‰‹ç¤¾åŒº | kernelnewbies.org |

## ğŸ”— å…³è”çŸ¥è¯†

```mermaid
flowchart TB
    subgraph C03_Driver_Dev[é©±åŠ¨å¼€å‘]
        Char_Driver[å­—ç¬¦è®¾å¤‡]
        Block_Driver[å—è®¾å¤‡]
        Net_Driver[ç½‘ç»œè®¾å¤‡]
        PCI_Driver[PCIeé©±åŠ¨]
    end
    
    subgraph B02_Kernel[Unixå†…æ ¸]
        C01_Memory_Mgmt[[C01 å†…å­˜ç®¡ç†]]
        C02_Process_Sched[[C02 è¿›ç¨‹è°ƒåº¦]]
    end
    
    C03_Driver_Dev --> C01_Memory_Mgmt
    C03_Driver_Dev --> C02_Process_Sched
```

## ğŸ’¡ å­¦ä¹ å»ºè®®

### å…¥é—¨è·¯å¾„

1. **åŸºç¡€å‡†å¤‡**ï¼ˆ1-2å‘¨ï¼‰
   - å­¦ä¹ Cè¯­è¨€å’ŒLinuxç³»ç»Ÿç¼–ç¨‹
   - ç†è§£å†…æ ¸æ¨¡å—åŸºç¡€
   - æ­å»ºå†…æ ¸ç¼–è¯‘ç¯å¢ƒ

2. **ç®€å•é©±åŠ¨**ï¼ˆ3-4å‘¨ï¼‰
   - å­—ç¬¦è®¾å¤‡é©±åŠ¨å¼€å‘
   - ç†è§£file_operations
   - å­¦ä¹ ä¸­æ–­å’Œå¹¶å‘æ§åˆ¶

3. **é«˜çº§ä¸»é¢˜**ï¼ˆ5-8å‘¨ï¼‰
   - å¹³å°è®¾å¤‡å’Œè®¾å¤‡æ ‘
   - DMAå’Œå†…å­˜æ˜ å°„
   - æ€»çº¿é©±åŠ¨ï¼ˆPCI/USBï¼‰

---

*æœ€åæ›´æ–°: 2026-01-30*  
*ç»´æŠ¤è€…: Infrastructure Team*
